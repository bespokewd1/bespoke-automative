---
import { Icon } from "astro-icon/components";
interface Props {
  label?: string;
}

const { label = "Book Service" } = Astro.props;

// We define the solid shape here to reuse it
const solidPath =
  "polygon(0 14px, 14px 0, 100% 0, 100% calc(100% - 14px), calc(100% - 14px) 100%, 0 100%)";
// This is your original "hollow" border path
const borderPath =
  "polygon(0 14px, 14px 0, 100% 0, 100% calc(100% - 14px), calc(100% - 14px) 100%, 0 100%, 0 14px, 2px 14.8px, 2px calc(100% - 2px), calc(100% - 14px - 0.8px) calc(100% - 2px), calc(100% - 2px) calc(100% - 14px - 0.8px), calc(100% - 2px) 2px, 14.8px 2px, 2px 14.8px)";
---

<a
  href="/contact/"
  style={`clip-path: ${solidPath};`}
  class:list={[
    "group relative z-1 ml-auto hidden h-12.5 bg-transparent px-2 py-0 text-center leading-[3.125em]! font-bold text-fg uppercase transition-colors duration-300 ease-in lg:inline-block",
    "hover:bg-accent",
    "w-43",
  ]}
>
  {/* The Border Layer */}
  <span
    style={`clip-path: ${borderPath};`}
    class="absolute inset-0 z-10 block bg-accent transition-colors duration-300 group-hover:bg-transparent"
    aria-hidden="true"></span>

  {/* The Content Layer */}
  <span
    class:list={[
      "relative z-20 mx-auto flex items-center gap-0 overflow-hidden",
    ]}
  >
    {
      [...Array(2)].map((_, i) => (
        <span
          class="font-strong inline-flex w-fit flex-[0_0_100%] animate-move-to-left items-center justify-center gap-2 group-hover:text-bg group-hover:[animation-play-state:paused] group-focus-visible:[animation-play-state:paused]"
          aria-hidden={i === 1}
        >
          <Icon
            name="tabler:calendar-plus"
            class="size-[1.2em] group-hover:text-bg"
          />
          {label}
        </span>
      ))
    }
  </span>
</a>
